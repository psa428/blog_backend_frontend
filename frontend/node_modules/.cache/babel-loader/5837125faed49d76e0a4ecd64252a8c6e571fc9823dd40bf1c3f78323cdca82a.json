{"ast":null,"code":"import { getSession, addSession, deleteSession } from \"./api\";\nexport const sessions = {\n  create(user) {\n    const hash = Math.random().toFixed(50);\n    addSession(hash, user);\n    return hash;\n  },\n  async remove(hash) {\n    const session = await getSession(hash);\n    if (!session) {\n      return;\n    }\n    ;\n    deleteSession(session.id);\n  },\n  async access(hash, accessRoles) {\n    const dbSession = await getSession(hash);\n    return !!(dbSession !== null && dbSession !== void 0 && dbSession.user) && accessRoles.includes(dbSession.user.roleId);\n  }\n};","map":{"version":3,"names":["getSession","addSession","deleteSession","sessions","create","user","hash","Math","random","toFixed","remove","session","id","access","accessRoles","dbSession","includes","roleId"],"sources":["/home/psa/develop/result-school/blog/src/bff/sessions.js"],"sourcesContent":["import { getSession, addSession, deleteSession } from \"./api\";\n\nexport const sessions = {\n   \n    create(user) {\n        const hash = Math.random().toFixed(50);\n\n        addSession(hash, user);\n\n        return hash;\n    },\n    \n    async remove(hash) {\n        const session = await getSession(hash);\n\n        if (!session) {\n            return;\n        };\n\n        deleteSession(session.id);\n    },\n\n    async access(hash, accessRoles) {  \n        const dbSession =  await getSession(hash);\n        \n        return !!dbSession?.user && accessRoles.includes(dbSession.user.roleId);\n     },\n};"],"mappings":"AAAA,SAASA,UAAU,EAAEC,UAAU,EAAEC,aAAa,QAAQ,OAAO;AAE7D,OAAO,MAAMC,QAAQ,GAAG;EAEpBC,MAAMA,CAACC,IAAI,EAAE;IACT,MAAMC,IAAI,GAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,EAAE,CAAC;IAEtCR,UAAU,CAACK,IAAI,EAAED,IAAI,CAAC;IAEtB,OAAOC,IAAI;EACf,CAAC;EAED,MAAMI,MAAMA,CAACJ,IAAI,EAAE;IACf,MAAMK,OAAO,GAAG,MAAMX,UAAU,CAACM,IAAI,CAAC;IAEtC,IAAI,CAACK,OAAO,EAAE;MACV;IACJ;IAAC;IAEDT,aAAa,CAACS,OAAO,CAACC,EAAE,CAAC;EAC7B,CAAC;EAED,MAAMC,MAAMA,CAACP,IAAI,EAAEQ,WAAW,EAAE;IAC5B,MAAMC,SAAS,GAAI,MAAMf,UAAU,CAACM,IAAI,CAAC;IAEzC,OAAO,CAAC,EAACS,SAAS,aAATA,SAAS,eAATA,SAAS,CAAEV,IAAI,KAAIS,WAAW,CAACE,QAAQ,CAACD,SAAS,CAACV,IAAI,CAACY,MAAM,CAAC;EAC1E;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}